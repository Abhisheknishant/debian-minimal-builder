#
# Check that systemd thinks the system has booted with no errors

expect "root@ramdisk"   {send "systemctl is-system-running\r"}
expect "systemctl is-system-running" {}

expect {
    "degraded"   {bad 1 "systemctl state is degraded"}
    "starting"   {
        expect "root@ramdisk" {send "systemctl list-jobs\r"}
    }
    "running"    {}
}

# TODO
# - if state: starting, wait for the jobs to finish?
